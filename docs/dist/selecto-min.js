var Selecto=function(){this.button=!1,this.oldSelectbox=!1,this.newSelectbox=!1,this.options=!1,this.previousSelected=!1;var t={isInt:function(t){return t==parseInt(t)},fadeIn:function(t){t.style.display="block"},addClass:function(t,e){return t.classList.add(e),this},removeClass:function(t,e){var s=t.classList;return s.contains(e)&&s.remove(e),this}};function e(e,s){e&&"object"==typeof s&&(this.options=function(t,e){var s;for(s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}({width:!1,height:!1,renderItem:!1,renderBtn:!1,onChange:!1},arguments[1])),this.oldSelectbox=function(t){var e;"#"===t.charAt(0)?e=document.getElementById(t.substring(1)):"."===t.charAt(0)&&(e=document.getElementsByClassName(t.substring(1))[0]);return e}.call(this,arguments[0]),this.defaultSelected=this.oldSelectbox.value,function(){this.oldSelectbox.style.display="none"}.call(this),function(){var e,s,o,n,i,c,r;this,this.options&&t.isInt(this.options.width)&&(c=this.options.width+"px");this.options&&t.isInt(this.options.height)&&(r=this.options.height+"px");s=document.createElement("div"),t.addClass(s,"selecto"),e=document.createDocumentFragment(),this.button=document.createElement("div"),this.button.className="selecto-selected",(o=document.createElement("span")).className="selecto-txt",o.textContent="select",c&&(this.button.style.width=c);r&&(this.button.style.height=r);document.createElement("span"),(i=document.createElement("span")).className="selecto-arrow-down selecto-arrow",this.button.appendChild(o),this.button.appendChild(i),this.newSelectbox=document.createElement("ul"),this.newSelectbox.className="selecto-tree",this.newSelectbox.setAttribute("style","display:none"),c&&(this.newSelectbox.style.width=c);for(var a=0;a<this.oldSelectbox.length;a++){var d=this.oldSelectbox[a],h=l.call(this,d);this.newSelectbox.appendChild(h)}e.appendChild(this.button),e.appendChild(this.newSelectbox),s.appendChild(e),n=this.oldSelectbox,n.parentNode.insertBefore(s,n.nextSibling)}.call(this),function(){var e=this;this.button.addEventListener("click",i.bind(this)),document.addEventListener("click",function(s){var o=e.button.querySelector(".selecto-arrow");e.button.parentNode.contains(s.target)||(function(){var t=this.button.parentNode.querySelector(".selecto-tree");t.scrollTop=0,t.style.display="none"}.call(e),t.removeClass(o,"selecto-arrow-up").addClass(o,"selecto-arrow-down"))})}.call(this)}function s(t){var e,s,i,l,c;if(s=t.getAttribute("data-key"),this.button.parentNode){i=this.button.parentNode.previousSibling.children,o.call(this);for(var r=0;r<i.length;r++)i[r].value===s&&(c=i[r]).setAttribute("selected","selected")}else{i=this.oldSelectbox;for(r=0;r<i.length;r++)i[r].value===s&&(c=i[r]).setAttribute("selected","selected")}if(c!==this.previousSelected){this.previousSelected=c,n.call(this),l=this.newSelectbox.children;for(r=0;r<l.length;r++){s==l[r].getAttribute("data-key")&&(l[r].className+=" selecto-is-selected")}e=this.button.querySelector(".selecto-txt"),this.options&&"function"==typeof this.options.renderBtn?e.innerHTML=this.options.renderBtn(c):e.innerHTML=c.textContent,this.options&&"function"==typeof this.options.onChange&&this.options.onChange(c)}}function o(){for(var t=0;t<this.oldSelectbox.length;t++)this.oldSelectbox[t].removeAttribute("selected")}function n(){for(var t=this.newSelectbox.children,e=0;e<t.length;e++)t[e].classList.remove("selecto-is-selected")}function i(){var e,s=this.button.parentNode.querySelector(".selecto-tree");e=this.button.querySelector(".selecto-arrow"),"none"===s.style.display?(window.setTimeout(function(){s.style.display="block"},200),t.removeClass(e,"selecto-arrow-down").addClass(e,"selecto-arrow-up")):(s.scrollTop=0,s.style.display="none",t.removeClass(e,"selecto-arrow-up").addClass(e,"selecto-arrow-down"))}function l(e){var o=document.createElement("li");return this.options&&"function"==typeof this.options.renderItem?o.innerHTML=this.options.renderItem(e):o.textContent=e.text,t.addClass(o,"selecto-item"),o.setAttribute("data-key",e.value),o.addEventListener("click",s.bind(this,o)),o.addEventListener("click",i.bind(this)),this.height&&(o.style.height=this.height,o.style.lineHeight=this.height),this.defaultSelected===e.value&&(t.addClass(o,"selecto-is-selected"),s.call(this,o)),o}return e.prototype.addValue=function(e){var s,i,l,c;s=this.oldSelectbox,this.button,l=this.newSelectbox,o.call(this);for(var r=0;r<s.length;r++)e==s[r].value&&s[r].setAttribute("selected","selected");i=s.options[s.selectedIndex].text,this.button.querySelector(".selecto-txt").innerHTML=i,n.call(this),c=l.children;for(r=0;r<c.length;r++){e==c[r].getAttribute("data-key")&&t.addClass(c[r],"selecto-is-selected")}},e.prototype.getValue=function(){return this.oldSelectbox.value},e}();